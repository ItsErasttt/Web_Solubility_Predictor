<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ Log S</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="light">

<div class="container">


    <div class="theme-switcher">
        <label for="switch" class="switch-label">–°–≤–µ—Ç–ª–∞—è / –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</label>
        <label class="switch">
            <input type="checkbox" id="switch">
            <span class="slider"></span>
        </label>
    </div>

    <h1>üß™ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ Log S –¥–ª—è —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π</h1>


    <div class="grid-container">

        <div class="left-column">


            <section class="card ketcher-card">
                <div class="flex-container">
                    <h2>üé® –†–µ–¥–∞–∫—Ç–æ—Ä –º–æ–ª–µ–∫—É–ª (Ketcher)</h2>
                    <button id="how-to-use-btn" class="btn-info btn-sm">–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</button>
                </div>
                <button id="open-ketcher-btn" class="btn-primary">–û—Ç–∫—Ä—ã—Ç—å Ketcher</button>
                <div id="ketcher-container" class="ketcher-container">
                    <button id="close-ketcher-btn" class="close-btn">√ó</button>
                    <iframe id="ketcher-frame" src="/static/ketcher/index.html"></iframe>
                </div>
            </section>


            <section class="card smiles-card">
                <h2>‚úçÔ∏è –í–≤–æ–¥ SMILES-—Å—Ç—Ä–æ–∫</h2>
                <textarea id="smiles-input" placeholder="CC(=O)OC1=CC=CC=C1C(=O)O&#10;CCO"></textarea>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å:</p>
                <select id="model-select">
                    <option value="old">XGBoost (—Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å)</option>
                    <option value="new">Random Forest (–Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å)</option>
                </select>
                <button id="predict-button" class="btn-primary">–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å Log S</button>
            </section>


            <section class="card mol-upload-card">
                <h2>üß¨ –ó–∞–≥—Ä—É–∑–∫–∞ .mol —Ñ–∞–π–ª–∞</h2>
                <input type="file" id="mol-upload" accept=".mol,.sdf">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å:</p>
                <select id="mol-model-select">
                    <option value="old">XGBoost (—Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å)</option>
                    <option value="new">Random Forest (–Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å)</option>
                </select>
                <button id="upload-mol-button" class="btn-primary">–ó–∞–≥—Ä—É–∑–∏—Ç—å .mol</button>
            </section>

        </div>

   
        <div class="right-column">


            <section class="card pubchem-card">
                <h2>üîé –ü–æ–∏—Å–∫ –º–æ–ª–µ–∫—É–ª —á–µ—Ä–µ–∑ PubChem</h2>
                <input type="text" id="pubchem-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ CID">
                <button id="pubchem-search-button" class="btn-primary">–ü–æ–∏—Å–∫</button>
            </section>


            <section class="card csv-upload-card">
                <h2>üìÅ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV</h2>
                <input type="file" id="csv-upload" accept=".csv">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å:</p>
                <select id="csv-model-select">
                    <option value="old">XGBoost (—Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å)</option>
                    <option value="new">Random Forest (–Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å)</option>
                </select>
                <button id="upload-csv-button" class="btn-primary">–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV</button>
            </section>


            <section class="card csv-download-card">
                <h2>üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h2>
                <button id="download-csv-button" class="btn-primary">–°–∫–∞—á–∞—Ç—å CSV</button>
            </section>


            <section class="card history-card">
                <h2>üïí –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π</h2>
                <a href="/history" class="btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∏—Å—Ç–æ—Ä–∏–∏</a>
            </section>

        </div>

    </div>


    <section class="card results-section">
        <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</h2>
        <div id="results"></div>
    </section>

</div>

<div id="help-modal" class="modal hidden">
    <div class="modal-content">
        <span id="close-modal" class="modal-close">&times;</span>
        <h2>üìò –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Ketcher</h2>
        <ul class="modal-list">
            <li>1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"–û—Ç–∫—Ä—ã—Ç—å Ketcher"</strong>.</li>
            <li>2. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –Ω–∞—Ä–∏—Å—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –º–æ–ª–µ–∫—É–ª—É.</li>
            <li>3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω–Ω—É—é –º–æ–ª–µ–∫—É–ª—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ mol –∏ –∑–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ Ketcher.</li>
            <li>4. –í –ø–æ–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ .mol –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.</li>
            <li>5. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ <strong>"–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å Log S"</strong>.</li>
        </ul>
    </div>
</div>


<script src="{{ url_for('static', filename='js/script.js') }}"></script>


<script>
    const switchBtn = document.getElementById('switch');
    const body = document.body;


    const isDark = localStorage.getItem('darkTheme') === 'true';
    if (isDark) {
        body.classList.add('dark');
        switchBtn.checked = true;
    }


    switchBtn.addEventListener('change', () => {
        if (switchBtn.checked) {
            body.classList.add('dark');
            localStorage.setItem('darkTheme', 'true');
        } else {
            body.classList.remove('dark');
            localStorage.setItem('darkTheme', 'false');
        }
    });
</script>


<script>

    document.getElementById('how-to-use-btn').addEventListener('click', () => {
        document.getElementById('help-modal').classList.remove('hidden');
    });


    document.getElementById('close-modal').addEventListener('click', () => {
        document.getElementById('help-modal').classList.add('hidden');
    });


    document.getElementById('help-modal').addEventListener('click', function (e) {
        if (e.target === this) {
            this.classList.add('hidden');
        }
    });
</script>

</body>
</html>

